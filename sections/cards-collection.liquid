{% assign products_per_page = section.settings.products_per_page %}
{% assign columns_desktop = section.settings.columns_desktop %}
{% assign columns_mobile = section.settings.columns_mobile %}

<div class="collection-template">
  {% paginate collection.products by products_per_page %}
    <div class="product-grid" style="grid-template-columns: repeat({{ columns_desktop }}, 1fr);">
      {% for product in collection.products %}
        <div class="product-grid__item">
          {% render 'product-card', product: product %}
        </div>
      {% endfor %}
    </div>
    {% render 'pagination' %}
  {% endpaginate %}
</div>

{% schema %}
{
  "name": "Cards Collection",
  "settings": [
    {
      "type": "range",
      "id": "products_per_page",
      "label": "Products Per Page",
      "min": 4,
      "max": 20,
      "step": 4,
      "default": 16
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "label": "Columns (Mobile)",
      "min": 1,
      "max": 2,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Columns (Desktop)",
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 4
    }
  ]
}
{% endschema %}